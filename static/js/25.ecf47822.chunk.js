(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[25],{145:function(e,t,n){e.exports=n.p+"static/media/laptop.f51f9ca6.png"},183:function(e,t,n){"use strict";n.d(t,"k",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return v}));var r=n(0),a=n.n(r),o=n(1),c=n(36),u=n.n(c),s=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://bananauyu-api.onrender.com/api/user/cart",{cart:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://bananauyu-api.onrender.com/api/user/cart",{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.delete("https://bananauyu-api.onrender.com/api/user/cart",{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://bananauyu-api.onrender.com/api/user/address",{address:n},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://bananauyu-api.onrender.com/api/user/cart/coupon",{coupon:n},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://bananauyu-api.onrender.com/api/user/order",{stripeResponse:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://bananauyu-api.onrender.com/api/user/orders",{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://bananauyu-api.onrender.com/api/user/wishlist",{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.put("https://bananauyu-api.onrender.com/api/user/wishlist/".concat(t),{},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://bananauyu-api.onrender.com/api/user/wishlist",{productId:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://bananauyu-api.onrender.com/api/user/cash-order",{couponApplied:r,COD:n},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},226:function(e,t,n){"use strict";t.a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},518:function(e,t,n){!function(e,t){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(){}function c(){}t=t&&t.hasOwnProperty("default")?t.default:t,c.resetWarningCache=o;var u=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports=function(){function e(e,t,n,r,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:c,resetWarningCache:o};return n.PropTypes=n,n}()})),s=function(e){return null!==e&&"object"===n(e)},i=function e(t,n){if(!s(t)||!s(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var a="[object Object]"===Object.prototype.toString.call(t);if(a!==("[object Object]"===Object.prototype.toString.call(n)))return!1;if(!a&&!r)return!1;var o=Object.keys(t),c=Object.keys(n);if(o.length!==c.length)return!1;for(var u={},i=0;i<o.length;i+=1)u[o[i]]=!0;for(var p=0;p<c.length;p+=1)u[c[p]]=!0;var l=Object.keys(u);if(l.length!==o.length)return!1;var f=t,d=n;return l.every((function(t){return e(f[t],d[t])}))},p=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},l=function(e){if(null===e||s(t=e)&&"function"===typeof t.elements&&"function"===typeof t.createToken&&"function"===typeof t.createPaymentMethod&&"function"===typeof t.confirmCardPayment)return e;var t;throw new Error("Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},f=function(e){if(function(e){return s(e)&&"function"===typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(l)};var t=l(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},d=t.createContext(null);d.displayName="ElementsContext";var m=function(e){var n=e.stripe,r=e.options,o=e.children,c=t.useRef(!1),u=t.useRef(!0),s=t.useMemo((function(){return f(n)}),[n]),l=a(t.useState((function(){return{stripe:null,elements:null}})),2),m=l[0],h=l[1],y=p(n),b=p(r);return null!==y&&(y!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),i(r,b)||console.warn("Unsupported prop change on Elements: You cannot change the `options` prop after setting the `stripe` prop.")),c.current||("sync"===s.tag&&(c.current=!0,h({stripe:s.stripe,elements:s.stripe.elements(r)})),"async"===s.tag&&(c.current=!0,s.stripePromise.then((function(e){e&&u.current&&h({stripe:e,elements:e.elements(r)})})))),t.useEffect((function(){return function(){u.current=!1}}),[]),t.useEffect((function(){var e=m.stripe;e&&e._registerWrapper&&e._registerWrapper({name:"react-stripe-js",version:"1.1.2"})}),[m.stripe]),t.createElement(d.Provider,{value:m},o)};m.propTypes={stripe:u.any,options:u.object};var h=function(e){return function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e}(t.useContext(d),e)},y=function(e){return(0,e.children)(h("mounts <ElementsConsumer>"))};y.propTypes={children:u.func.isRequired};var b=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},v=function(e){return s(e)?(e.paymentRequest,r(e,["paymentRequest"])):{}},E=function(){},g=function(e,n){var r,a="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),o=n?function(e){h("mounts <".concat(a,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r=n.id,o=n.className,c=n.options,u=void 0===c?{}:c,s=n.onBlur,p=void 0===s?E:s,l=n.onFocus,f=void 0===l?E:l,d=n.onReady,m=void 0===d?E:d,y=n.onChange,g=void 0===y?E:y,w=n.onEscape,O=void 0===w?E:w,j=n.onClick,x=void 0===j?E:j,k=h("mounts <".concat(a,">")).elements,S=t.useRef(null),C=t.useRef(null),N=b(m),P=b(p),T=b(f),R=b(x),A=b(g),_=b(O);t.useLayoutEffect((function(){if(null==S.current&&k&&null!=C.current){var t=k.create(e,u);S.current=t,t.mount(C.current),t.on("ready",(function(){return N(t)})),t.on("change",A),t.on("blur",P),t.on("focus",T),t.on("escape",_),t.on("click",R)}}));var B=t.useRef(u);return t.useEffect((function(){B.current&&B.current.paymentRequest!==u.paymentRequest&&console.warn("Unsupported prop change: options.paymentRequest is not a customizable property.");var e=v(u);0===Object.keys(e).length||i(e,v(B.current))||S.current&&(S.current.update(e),B.current=u)}),[u]),t.useEffect((function(){return function(){S.current&&S.current.destroy()}}),[]),t.createElement("div",{id:r,className:o,ref:C})};return o.propTypes={id:u.string,className:u.string,onChange:u.func,onBlur:u.func,onFocus:u.func,onReady:u.func,onClick:u.func,options:u.object},o.displayName=a,o.__elementType=e,o},w="undefined"===typeof window,O=g("auBankAccount",w),j=g("card",w),x=g("cardNumber",w),k=g("cardExpiry",w),S=g("cardCvc",w),C=g("fpxBank",w),N=g("iban",w),P=g("idealBank",w),T=g("paymentRequestButton",w);e.AuBankAccountElement=O,e.CardCvcElement=S,e.CardElement=j,e.CardExpiryElement=k,e.CardNumberElement=x,e.Elements=m,e.ElementsConsumer=y,e.FpxBankElement=C,e.IbanElement=N,e.IdealBankElement=P,e.PaymentRequestButtonElement=T,e.useElements=function(){return h("calls useElements()").elements},e.useStripe=function(){return h("calls useStripe()").stripe},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2))},892:function(e,t,n){},900:function(e,t,n){"use strict";var r=n(2),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"},o=n(51),c=function(e,t){return r.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};c.displayName="DollarOutlined";t.a=r.forwardRef(c)},928:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o="https://js.stripe.com/v3",c=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,u="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",s=null,i=function(e){return null!==s?s:s=new Promise((function(t,n){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(u),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(o,'"]')),t=0;t<e.length;t++){var n=e[t];if(c.test(n.src))return n}return null}();r&&e?console.warn(u):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(o).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(a){return void n(a)}else t(null)}))},p=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.9.0",startTime:t})}(r,n),r},l=Promise.resolve().then((function(){return i(null)})),f=!1;l.catch((function(e){f||console.warn(e)}));var d=n(518),m=n(0),h=n.n(m),y=n(1),b=n(21),v=n(31),E=n(35),g=n(36),w=n.n(g),O=n(44),j=n(279),x=n(900),k=n(226),S=n(51),C=function(e,t){return r.createElement(S.a,Object.assign({},e,{ref:t,icon:k.a}))};C.displayName="CheckOutlined";var N=r.forwardRef(C),P=n(145),T=n.n(P),R=n(183),A=function(e){e.history;var t=Object(E.b)(),n=Object(E.c)((function(e){return Object(v.a)({},e)})),o=n.user,c=n.coupon,u=Object(r.useState)(!1),s=Object(b.a)(u,2),i=s[0],p=s[1],l=Object(r.useState)(null),f=Object(b.a)(l,2),m=f[0],g=f[1],k=Object(r.useState)(""),S=Object(b.a)(k,2),C=S[0],P=S[1],A=Object(r.useState)(!0),_=Object(b.a)(A,2),B=_[0],F=_[1],I=Object(r.useState)(""),q=Object(b.a)(I,2),D=q[0],W=q[1],z=Object(r.useState)(0),L=Object(b.a)(z,2),U=L[0],M=L[1],V=Object(r.useState)(0),Y=Object(b.a)(V,2),J=Y[0],H=Y[1],$=Object(r.useState)(0),K=Object(b.a)($,2),G=K[0],Z=K[1],Q=Object(d.useStripe)(),X=Object(d.useElements)();Object(r.useEffect)((function(){(function(e,t){return w.a.post("https://bananauyu-api.onrender.com/api/create-payment-intent",{couponApplied:t},{headers:{authtoken:e}})})(o.token,c).then((function(e){console.log("create payment intent",e.data),W(e.data.clientSecret),M(e.data.cartTotal),H(e.data.totalAfterDiscount),Z(e.data.payable)}))}),[]);var ee=function(){var e=Object(y.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),P(!0),e.next=4,Q.confirmCardPayment(D,{payment_method:{card:X.getElement(d.CardElement),billing_details:{name:n.target.name.value}}});case 4:(r=e.sent).error?(g("Payment failed ".concat(r.error.message)),P(!1)):(Object(R.d)(r,o.token).then((function(e){e.data.ok&&("undefined"!==typeof window&&localStorage.removeItem("cart"),t({type:"ADD_TO_CART",payload:[]}),t({type:"COUPON_APPLIED",payload:!1}),Object(R.e)(o.token))})),console.log(JSON.stringify(r,null,4)),g(null),P(!1),p(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(t.empty),g(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,!i&&a.a.createElement("div",null,c&&void 0!==J?a.a.createElement("p",{className:"alert alert-success"},"Total after discount: $".concat(J)):a.a.createElement("p",{className:"alert alert-danger"},"No coupon applied")),a.a.createElement("div",{className:"text-center pb-5"},a.a.createElement(j.a,{cover:a.a.createElement("img",{src:T.a,style:{height:"200px",objectFit:"cover",marginBottom:"-50px"}}),actions:[a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,{className:"text-info"})," ",a.a.createElement("br",null)," Total: $",U),a.a.createElement(a.a.Fragment,null,a.a.createElement(N,{className:"text-info"})," ",a.a.createElement("br",null)," Total payable : $",(G/100).toFixed(2))]})),a.a.createElement("form",{id:"payment-form",className:"stripe-form",onSubmit:ee},a.a.createElement(d.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},onChange:te}),a.a.createElement("button",{className:"stripe-button",disabled:C||B||i},a.a.createElement("span",{id:"button-text"},C?a.a.createElement("div",{className:"spinner",id:"spinner"}):"Pay")),a.a.createElement("br",null),m&&a.a.createElement("div",{className:"card-error",role:"alert"},m),a.a.createElement("br",null),a.a.createElement("p",{className:i?"result-message":"result-message hidden"},"Payment Successful."," ",a.a.createElement(O.b,{to:"/user/history"},"See it in your purchase history."))))},_=(n(892),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];f=!0;var r=Date.now();return l.then((function(e){return p(e,t,r)}))}("pk_test_51N16BPKFTkD9picl1ZgrbruO3plTmOHeD3s67SWIju3Aw9Y3dadh2YNUGJTgE6hBqTWeAc47o3esAuEuSNKoSBnA00NVJiME3c"));t.default=function(){return a.a.createElement("div",{className:"container p-5 text-center"},a.a.createElement("h4",null,"Complete your purchase"),a.a.createElement(d.Elements,{stripe:_},a.a.createElement("div",{className:"col-md-8 offset-md-2"},a.a.createElement(A,null))))}}}]);
//# sourceMappingURL=25.ecf47822.chunk.js.map