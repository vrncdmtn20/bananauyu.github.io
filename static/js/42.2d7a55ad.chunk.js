(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[42],{902:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(1),c=a(31),s=a(21),l=a(2),u=a.n(l),i=a(54),m=a(52),p=a(331),d=a(936),f=a(937),h=a(35),b=a(44),g=a(57);t.default=function(e){var t=e.history,a=Object(l.useState)(""),n=Object(s.a)(a,2),v=n[0],E=n[1],k=Object(l.useState)(""),w=Object(s.a)(k,2),O=w[0],j=w[1],y=Object(l.useState)(!1),N=Object(s.a)(y,2),x=N[0],_=N[1],I=Object(h.c)((function(e){return Object(c.a)({},e)})).user;Object(l.useEffect)((function(){t.location.state||I&&I.token&&t.push("/")}),[I,t]);var L=Object(h.b)(),S=function(e){var a=t.location.state;a?t.push(a.from):"admin"===e.data.role?t.push("/admin/dashboard"):t.push("/user/history")},G=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_(!0),e.prev=2,e.next=5,i.a.signInWithEmailAndPassword(v,O);case 5:return a=e.sent,n=a.user,e.next=9,n.getIdTokenResult();case 9:o=e.sent,Object(g.a)(o.token).then((function(e){L({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:o.token,role:e.data.role,_id:e.data._id}}),S(e)})).catch((function(e){return console.log(e)})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),m.b.error(e.t0.message),_(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.a.signInWithPopup(i.b).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,e.next=3,a.getIdTokenResult();case 3:n=e.sent,Object(g.a)(n.token).then((function(e){L({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:n.token,role:e.data.role,_id:e.data._id}}),S(e)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),m.b.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("div",{className:"container p-5"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-6 offset-md-3"},x?u.a.createElement("h4",{className:"text-danger"},"Loading..."):u.a.createElement("h4",null,"Login"),u.a.createElement("form",{onSubmit:G},u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"email",className:"form-control",value:v,onChange:function(e){return E(e.target.value)},placeholder:"Your email",autoFocus:!0})),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"password",className:"form-control",value:O,onChange:function(e){return j(e.target.value)},placeholder:"Your password"})),u.a.createElement("br",null),u.a.createElement(p.a,{onClick:G,type:"primary",className:"mb-3",block:!0,shape:"round",icon:u.a.createElement(d.a,null),size:"large",disabled:!v||O.length<6},"Login with Email/Password")),u.a.createElement(p.a,{onClick:C,type:"danger",className:"mb-3",block:!0,shape:"round",icon:u.a.createElement(f.a,null),size:"large"},"Login with Google"),u.a.createElement(b.b,{to:"/forgot/password",className:"float-right text-danger"},"Forgot Password"))))}}}]);
//# sourceMappingURL=42.2d7a55ad.chunk.js.map